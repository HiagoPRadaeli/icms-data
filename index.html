<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tabela ICMS Interestadual (2025)</title>
<style>
  :root{
    --bg:#f7f8fb; --card:#fff; --ink:#1f2937; --muted:#6b7280;
    --grid:#e5e7eb; --head:#0f172a; --head-ink:#fff;
    --c7:#ecfdf5;   /* 7% */
    --c12:#eef2ff;  /* 12% */
    --c4:#fff7ed;   /* 4% (importados) */
  }
  body{margin:0;background:var(--bg);font-family:Inter,system-ui,Segoe UI,Arial,sans-serif;color:var(--ink);}
  .wrap{max-width:1100px;margin:32px auto;padding:0 16px;}
  h1{margin:0 0 12px;font-size:clamp(18px,2.2vw,28px);}
  .sub{color:var(--muted);margin-bottom:16px;font-size:14px}
  .card{background:var(--card);border:1px solid var(--grid);border-radius:14px;box-shadow:0 10px 24px rgba(0,0,0,.05);}
  .table-wrap{overflow:auto;border-radius:14px;}
  table{border-collapse:separate;border-spacing:0;min-width:920px;}
  th,td{border:1px solid var(--grid);padding:8px 10px;text-align:center;white-space:nowrap;font-size:13px}
  thead th{position:sticky;top:0;background:var(--head);color:var(--head-ink);z-index:3}
  tbody th{position:sticky;left:0;background:var(--head);color:var(--head-ink);text-align:left;z-index:2}
  td{background:#fff}
  td.c7{background:var(--c7)}
  td.c12{background:var(--c12)}
  td.c4{background:var(--c4)}
  td.diag{background:#fafafa;color:#9ca3af;font-style:italic}
  .legend{display:flex;gap:14px;flex-wrap:wrap;padding:14px;border-top:1px solid var(--grid);font-size:12px;color:var(--muted)}
  .dot{width:14px;height:14px;border-radius:4px;border:1px solid var(--grid);display:inline-block;vertical-align:middle;margin-right:6px}
  .pill{padding:4px 8px;border:1px solid var(--grid);border-radius:999px;background:#fff;font-size:12px;color:var(--muted)}
</style>
</head>
<body>
  <div class="wrap">
    <h1>Tabela ICMS Interestadual (2025)</h1>
    <div class="sub">Regra geral: <span class="pill">12%</span> &nbsp;|&nbsp; Origem <b>Sul/Sudeste (exceto ES)</b> → Destino <b>N/NE/CO/ES</b>: <span class="pill">7%</span> &nbsp;|&nbsp; Importados: <span class="pill">4%</span> (indicativo).</div>

    <div class="card">
      <div class="table-wrap">
        <table id="t-icms">
          <thead><tr id="head-row"><th>Origem \\ Destino</th></tr></thead>
          <tbody id="body"></tbody>
        </table>
      </div>
      <div class="legend">
        <span><i class="dot" style="background:var(--c7)"></i>7% (S/SE* → N/NE/CO/ES)</span>
        <span><i class="dot" style="background:var(--c12)"></i>12% (demais casos)</span>
        <span><i class="dot" style="background:var(--c4)"></i>4% (importados – quando aplicável)</span>
        <span style="margin-left:auto;color:#94a3b8">*S/SE exceto ES</span>
      </div>
    </div>
  </div>

<script>
(async () => {
  const res = await fetch('icms_interestadual_2025.json');
  const cfg = await res.json();

  const UFS = cfg.ufs;
  const SSE = new Set(cfg.grupos.SSE);          // Sul/Sudeste (exceto ES)
  const NNECOES = new Set(cfg.grupos.NNECOES);  // Norte/Nordeste/CO + ES
  const A7 = cfg.regra.aliquota_destino_nnecoes_quando_origem_sse;
  const A12 = cfg.regra.aliquota_padrao;
  const A4 = cfg.regra.aliquota_importados;     // apenas indicativo visual

  // Cabeçalho (destinos)
  const headRow = document.getElementById('head-row');
  UFS.forEach(uf => {
    const th = document.createElement('th');
    th.textContent = uf;
    headRow.appendChild(th);
  });

  const tbody = document.getElementById('body');

  // Monta matriz: linha = origem, coluna = destino
  UFS.forEach(orig => {
    const tr = document.createElement('tr');

    const th = document.createElement('th');
    th.textContent = orig;
    tr.appendChild(th);

    UFS.forEach(dest => {
      const td = document.createElement('td');

      if (orig === dest) {
        td.textContent = '—';
        td.classList.add('diag');
      } else {
        // Regra 2025 (nacional): default 12%
        let aliquota = A12;
        let clazz = 'c12';

        // Origem SSE -> Dest NNECOES => 7%
        if (SSE.has(orig) && NNECOES.has(dest)) {
          aliquota = A7;
          clazz = 'c7';
        }

        // Marcação opcional de importados:
        // Se quiser ativar por produto, troque a condição abaixo.
        const importado = false;
        if (importado) { aliquota = A4; clazz = 'c4'; }

        td.textContent = aliquota + '%';
        td.classList.add(clazz);
        td.title = `Origem ${orig} → Destino ${dest}: ${aliquota}%`;
      }
      tr.appendChild(td);
    });

    tbody.appendChild(tr);
  });
})();
</script>
</body>
</html>
